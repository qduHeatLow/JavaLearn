{"remainingRequest":"C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js!C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\src\\views\\orderDetails\\index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\src\\views\\orderDetails\\index.vue","mtime":1706604657606},{"path":"C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"C:\\\\cangqiongwaimai\\\\\\u82CD\\u7A79\\u5916\\u5356\\u524D\\u7AEF\\u8BFE\\u7A0B\\\\\\u4EE3\\u7801\\\\day02\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"C:\\\\cangqiongwaimai\\\\\\u82CD\\u7A79\\u5916\\u5356\\u524D\\u7AEF\\u8BFE\\u7A0B\\\\\\u4EE3\\u7801\\\\day02\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"C:\\\\cangqiongwaimai\\\\\\u82CD\\u7A79\\u5916\\u5356\\u524D\\u7AEF\\u8BFE\\u7A0B\\\\\\u4EE3\\u7801\\\\day02\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/defineProperty\"));\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"C:\\\\cangqiongwaimai\\\\\\u82CD\\u7A79\\u5916\\u5356\\u524D\\u7AEF\\u8BFE\\u7A0B\\\\\\u4EE3\\u7801\\\\day02\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"C:\\\\cangqiongwaimai\\\\\\u82CD\\u7A79\\u5916\\u5356\\u524D\\u7AEF\\u8BFE\\u7A0B\\\\\\u4EE3\\u7801\\\\day02\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"C:\\\\cangqiongwaimai\\\\\\u82CD\\u7A79\\u5916\\u5356\\u524D\\u7AEF\\u8BFE\\u7A0B\\\\\\u4EE3\\u7801\\\\day02\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"C:\\\\cangqiongwaimai\\\\\\u82CD\\u7A79\\u5916\\u5356\\u524D\\u7AEF\\u8BFE\\u7A0B\\\\\\u4EE3\\u7801\\\\day02\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"C:\\\\cangqiongwaimai\\\\\\u82CD\\u7A79\\u5916\\u5356\\u524D\\u7AEF\\u8BFE\\u7A0B\\\\\\u4EE3\\u7801\\\\day02\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/inherits\"));\n\nvar _tslib = require(\"tslib\");\n\nvar _vuePropertyDecorator = require(\"vue-property-decorator\");\n\nvar _index = _interopRequireDefault(require(\"@/components/HeadLable/index.vue\"));\n\nvar _index2 = _interopRequireDefault(require(\"@/components/InputAutoComplete/index.vue\"));\n\nvar _tabChange = _interopRequireDefault(require(\"./tabChange.vue\"));\n\nvar _index3 = _interopRequireDefault(require(\"@/components/Empty/index.vue\"));\n\nvar _order = require(\"@/api/order\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar default_1 =\n/*#__PURE__*/\nfunction (_Vue) {\n  (0, _inherits2.default)(default_1, _Vue);\n\n  function default_1() {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, default_1);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(default_1).apply(this, arguments));\n    _this.defaultActivity = 0;\n    _this.orderStatics = {};\n    _this.row = {};\n    _this.isAutoNext = true;\n    _this.isTableOperateBtn = true;\n    _this.currentPageIndex = 0; //记录查看详情数据的index\n\n    _this.orderId = ''; //订单号\n\n    _this.input = ''; //搜索条件的订单号\n\n    _this.phone = ''; //搜索条件的手机号\n\n    _this.valueTime = [];\n    _this.dialogVisible = false; //详情弹窗\n\n    _this.cancelDialogVisible = false; //取消，拒单弹窗\n\n    _this.cancelDialogTitle = ''; //取消，拒绝弹窗标题\n\n    _this.cancelReason = '';\n    _this.remark = ''; //自定义原因\n\n    _this.counts = 0;\n    _this.page = 1;\n    _this.pageSize = 10;\n    _this.tableData = [];\n    _this.diaForm = [];\n    _this.isSearch = false;\n    _this.orderStatus = 0; //列表字段展示所需订单状态,用于分页请求数据\n\n    _this.dialogOrderStatus = 0; //弹窗所需订单状态，用于详情展示字段\n\n    _this.cancelOrderReasonList = [{\n      value: 1,\n      label: '订单量较多，暂时无法接单'\n    }, {\n      value: 2,\n      label: '菜品已销售完，暂时无法接单'\n    }, {\n      value: 3,\n      label: '餐厅已打烊，暂时无法接单'\n    }, {\n      value: 0,\n      label: '自定义原因'\n    }];\n    _this.cancelrReasonList = [{\n      value: 1,\n      label: '订单量较多，暂时无法接单'\n    }, {\n      value: 2,\n      label: '菜品已销售完，暂时无法接单'\n    }, {\n      value: 3,\n      label: '骑手不足无法配送'\n    }, {\n      value: 4,\n      label: '客户电话取消'\n    }, {\n      value: 0,\n      label: '自定义原因'\n    }];\n    _this.orderList = [{\n      label: '全部订单',\n      value: 0\n    }, {\n      label: '待付款',\n      value: 1\n    }, {\n      label: '待接单',\n      value: 2\n    }, {\n      label: '待派送',\n      value: 3\n    }, {\n      label: '派送中',\n      value: 4\n    }, {\n      label: '已完成',\n      value: 5\n    }, {\n      label: '已取消',\n      value: 6\n    }];\n    return _this;\n  }\n\n  (0, _createClass2.default)(default_1, [{\n    key: \"created\",\n    value: function created() {\n      this.init(Number(this.$route.query.status) || 0);\n    }\n  }, {\n    key: \"mounted\",\n    value: function mounted() {\n      //如果有值说明是消息通知点击进来的\n      if (this.$route.query.orderId && this.$route.query.orderId !== 'undefined') {\n        this.goDetail(this.$route.query.orderId, 2);\n      }\n\n      if (this.$route.query.status) {\n        this.defaultActivity = this.$route.query.status;\n      } // console.log(this.$route.query, 'this.$route')\n\n    }\n  }, {\n    key: \"initFun\",\n    value: function initFun(orderStatus) {\n      this.page = 1;\n      this.init(orderStatus);\n    }\n  }, {\n    key: \"change\",\n    value: function change(activeIndex) {\n      if (activeIndex === this.orderStatus) return;\n      this.init(activeIndex);\n      this.input = '';\n      this.phone = '';\n      this.valueTime = [];\n      this.dialogOrderStatus = 0;\n      this.$router.push('/order');\n      console.log(activeIndex, '接收到了子组件的index');\n    } //获取待处理，待派送，派送中数量\n\n  }, {\n    key: \"getOrderListBy3Status\",\n    value: function getOrderListBy3Status() {\n      var _this2 = this;\n\n      (0, _order.getOrderListBy)({}).then(function (res) {\n        if (res.data.code === 1) {\n          _this2.orderStatics = res.data.data;\n        } else {\n          _this2.$message.error(res.data.msg);\n        }\n      }).catch(function (err) {\n        _this2.$message.error('请求出错了：' + err.message);\n      });\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this3 = this;\n\n      var activeIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var isSearch = arguments.length > 1 ? arguments[1] : undefined;\n      this.isSearch = isSearch;\n      var params = {\n        page: this.page,\n        pageSize: this.pageSize,\n        number: this.input || undefined,\n        phone: this.phone || undefined,\n        beginTime: this.valueTime && this.valueTime.length > 0 ? this.valueTime[0] : undefined,\n        endTime: this.valueTime && this.valueTime.length > 0 ? this.valueTime[1] : undefined,\n        status: activeIndex || undefined\n      };\n      (0, _order.getOrderDetailPage)(_objectSpread({}, params)).then(function (res) {\n        if (res.data.code === 1) {\n          _this3.tableData = res.data.data.records;\n          _this3.orderStatus = activeIndex;\n          _this3.counts = Number(res.data.data.total);\n\n          _this3.getOrderListBy3Status();\n\n          if (_this3.dialogOrderStatus === 2 && _this3.orderStatus === 2 && _this3.isAutoNext && !_this3.isTableOperateBtn && res.data.data.records.length > 1) {\n            var row = res.data.data.records[0];\n\n            _this3.goDetail(row.id, row.status, row);\n          } else {\n            return null;\n          }\n        } else {\n          _this3.$message.error(res.data.msg);\n        }\n      }).catch(function (err) {\n        _this3.$message.error('请求出错了：' + err.message);\n      });\n    }\n  }, {\n    key: \"getOrderType\",\n    value: function getOrderType(row) {\n      if (row.status === 1) {\n        return '待付款';\n      } else if (row.status === 2) {\n        return '待接单';\n      } else if (row.status === 3) {\n        return '待派送';\n      } else if (row.status === 4) {\n        return '派送中';\n      } else if (row.status === 5) {\n        return '已完成';\n      } else if (row.status === 6) {\n        return '已取消';\n      } else {\n        return '退款';\n      }\n    } // 查看详情\n\n  }, {\n    key: \"goDetail\",\n    value: function () {\n      var _goDetail = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(id, status, row) {\n        var _ref, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // console.log(111, index, row)\n                this.diaForm = [];\n                this.dialogVisible = true;\n                this.dialogOrderStatus = status;\n                this.orderId = id;\n                _context.next = 6;\n                return (0, _order.queryOrderDetailById)({\n                  orderId: id\n                });\n\n              case 6:\n                _ref = _context.sent;\n                data = _ref.data;\n                this.diaForm = data.data;\n                this.row = row || {\n                  id: this.$route.query.orderId,\n                  status: status\n                };\n\n                if (this.$route.query.orderId) {\n                  this.$router.push('/order');\n                }\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function goDetail(_x, _x2, _x3) {\n        return _goDetail.apply(this, arguments);\n      }\n\n      return goDetail;\n    }() //打开拒单弹窗\n\n  }, {\n    key: \"orderReject\",\n    value: function orderReject(row) {\n      this.cancelDialogVisible = true;\n      this.orderId = row.id;\n      this.dialogOrderStatus = row.status;\n      this.cancelDialogTitle = '拒绝';\n      this.dialogVisible = false;\n      this.cancelReason = '';\n    } //接单\n\n  }, {\n    key: \"orderAccept\",\n    value: function orderAccept(row) {\n      var _this4 = this;\n\n      this.orderId = row.id;\n      this.dialogOrderStatus = row.status;\n      (0, _order.orderAccept)({\n        id: this.orderId\n      }).then(function (res) {\n        if (res.data.code === 1) {\n          _this4.$message.success('操作成功');\n\n          _this4.orderId = ''; // this.dialogOrderStatus = 0\n\n          _this4.dialogVisible = false;\n\n          _this4.init(_this4.orderStatus);\n        } else {\n          _this4.$message.error(res.data.msg);\n        }\n      }).catch(function (err) {\n        _this4.$message.error('请求出错了：' + err.message);\n      });\n    } //打开取消订单弹窗\n\n  }, {\n    key: \"cancelOrder\",\n    value: function cancelOrder(row) {\n      this.cancelDialogVisible = true;\n      this.orderId = row.id;\n      this.dialogOrderStatus = row.status;\n      this.cancelDialogTitle = '取消';\n      this.dialogVisible = false;\n      this.cancelReason = '';\n    } //确认取消或拒绝订单并填写原因\n\n  }, {\n    key: \"confirmCancel\",\n    value: function confirmCancel(type) {\n      var _this5 = this;\n\n      if (!this.cancelReason) {\n        return this.$message.error(\"\\u8BF7\\u9009\\u62E9\".concat(this.cancelDialogTitle, \"\\u539F\\u56E0\"));\n      } else if (this.cancelReason === '自定义原因' && !this.remark) {\n        return this.$message.error(\"\\u8BF7\\u8F93\\u5165\".concat(this.cancelDialogTitle, \"\\u539F\\u56E0\"));\n      }\n\n      ;\n      (this.cancelDialogTitle === '取消' ? _order.orderCancel : _order.orderReject)((0, _defineProperty2.default)({\n        id: this.orderId\n      }, this.cancelDialogTitle === '取消' ? 'cancelReason' : 'rejectionReason', this.cancelReason === '自定义原因' ? this.remark : this.cancelReason)).then(function (res) {\n        if (res.data.code === 1) {\n          _this5.$message.success('操作成功');\n\n          _this5.cancelDialogVisible = false;\n          _this5.orderId = ''; // this.dialogOrderStatus = 0\n\n          _this5.init(_this5.orderStatus);\n        } else {\n          _this5.$message.error(res.data.msg);\n        }\n      }).catch(function (err) {\n        _this5.$message.error('请求出错了：' + err.message);\n      });\n    } // 派送，完成\n\n  }, {\n    key: \"cancelOrDeliveryOrComplete\",\n    value: function cancelOrDeliveryOrComplete(status, id) {\n      var _this6 = this;\n\n      var params = {\n        status: status,\n        id: id\n      };\n      (status === 3 ? _order.deliveryOrder : _order.completeOrder)(params).then(function (res) {\n        if (res.data.code === 1) {\n          _this6.$message.success('操作成功');\n\n          _this6.orderId = ''; // this.dialogOrderStatus = 0\n\n          _this6.dialogVisible = false;\n\n          _this6.init(_this6.orderStatus);\n        } else {\n          _this6.$message.error(res.data.msg);\n        }\n      }).catch(function (err) {\n        _this6.$message.error('请求出错了：' + err.message);\n      });\n    }\n  }, {\n    key: \"handleClose\",\n    value: function handleClose() {\n      this.dialogVisible = false;\n    }\n  }, {\n    key: \"handleSizeChange\",\n    value: function handleSizeChange(val) {\n      this.pageSize = val;\n      this.init(this.orderStatus);\n    }\n  }, {\n    key: \"handleCurrentChange\",\n    value: function handleCurrentChange(val) {\n      this.page = val;\n      this.init(this.orderStatus);\n    }\n  }]);\n  return default_1;\n}(_vuePropertyDecorator.Vue);\n\ndefault_1 = (0, _tslib.__decorate)([(0, _vuePropertyDecorator.Component)({\n  components: {\n    HeadLable: _index.default,\n    InputAutoComplete: _index2.default,\n    TabChange: _tabChange.default,\n    Empty: _index3.default\n  }\n})], default_1);\nvar _default = default_1;\nexports.default = _default;",{"version":3,"sources":["C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\cangqiongwaimai\\苍穹外卖前端课程\\代码\\day02\\project-sky-admin-vue-ts\\src\\views\\orderDetails\\index.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator'\nimport HeadLable from '@/components/HeadLable/index.vue'\nimport InputAutoComplete from '@/components/InputAutoComplete/index.vue'\nimport TabChange from './tabChange.vue'\nimport Empty from '@/components/Empty/index.vue'\nimport {\n  getOrderDetailPage,\n  queryOrderDetailById,\n  completeOrder,\n  deliveryOrder,\n  orderCancel,\n  orderReject,\n  orderAccept,\n  getOrderListBy,\n} from '@/api/order'\n\n@Component({\n  components: {\n    HeadLable,\n    InputAutoComplete,\n    TabChange,\n    Empty,\n  },\n})\nexport default class extends Vue {\n  private defaultActivity: any = 0\n  private orderStatics = {}\n  private row = {}\n  private isAutoNext = true\n  private isTableOperateBtn = true\n  private currentPageIndex = 0 //记录查看详情数据的index\n  private orderId = '' //订单号\n  private input = '' //搜索条件的订单号\n  private phone = '' //搜索条件的手机号\n  private valueTime = []\n  private dialogVisible = false //详情弹窗\n  private cancelDialogVisible = false //取消，拒单弹窗\n  private cancelDialogTitle = '' //取消，拒绝弹窗标题\n  private cancelReason = ''\n  private remark = '' //自定义原因\n  private counts: number = 0\n  private page: number = 1\n  private pageSize: number = 10\n  private tableData = []\n  private diaForm = []\n  private isSearch: boolean = false\n  private orderStatus = 0 //列表字段展示所需订单状态,用于分页请求数据\n  private dialogOrderStatus = 0 //弹窗所需订单状态，用于详情展示字段\n  private cancelOrderReasonList = [\n    {\n      value: 1,\n      label: '订单量较多，暂时无法接单',\n    },\n    {\n      value: 2,\n      label: '菜品已销售完，暂时无法接单',\n    },\n    {\n      value: 3,\n      label: '餐厅已打烊，暂时无法接单',\n    },\n    {\n      value: 0,\n      label: '自定义原因',\n    },\n  ]\n\n  private cancelrReasonList = [\n    {\n      value: 1,\n      label: '订单量较多，暂时无法接单',\n    },\n    {\n      value: 2,\n      label: '菜品已销售完，暂时无法接单',\n    },\n    {\n      value: 3,\n      label: '骑手不足无法配送',\n    },\n    {\n      value: 4,\n      label: '客户电话取消',\n    },\n    {\n      value: 0,\n      label: '自定义原因',\n    },\n  ]\n  private orderList = [\n    {\n      label: '全部订单',\n      value: 0,\n    },\n    {\n      label: '待付款',\n      value: 1,\n    },\n    {\n      label: '待接单',\n      value: 2,\n    },\n    {\n      label: '待派送',\n      value: 3,\n    },\n    {\n      label: '派送中',\n      value: 4,\n    },\n    {\n      label: '已完成',\n      value: 5,\n    },\n    {\n      label: '已取消',\n      value: 6,\n    },\n  ]\n\n  created() {\n    this.init(Number(this.$route.query.status) || 0)\n  }\n\n  mounted() {\n    //如果有值说明是消息通知点击进来的\n    if (\n      this.$route.query.orderId &&\n      this.$route.query.orderId !== 'undefined'\n    ) {\n      this.goDetail(this.$route.query.orderId, 2)\n    }\n    if (this.$route.query.status) {\n      this.defaultActivity = this.$route.query.status\n    }\n    // console.log(this.$route.query, 'this.$route')\n  }\n\n  initFun(orderStatus) {\n    this.page = 1\n    this.init(orderStatus)\n  }\n\n  change(activeIndex) {\n    if (activeIndex === this.orderStatus) return\n    this.init(activeIndex)\n    this.input = ''\n    this.phone = ''\n    this.valueTime = []\n    this.dialogOrderStatus = 0\n    this.$router.push('/order')\n    console.log(activeIndex, '接收到了子组件的index')\n  }\n\n  //获取待处理，待派送，派送中数量\n  getOrderListBy3Status() {\n    getOrderListBy({})\n      .then((res) => {\n        if (res.data.code === 1) {\n          this.orderStatics = res.data.data\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n      .catch((err) => {\n        this.$message.error('请求出错了：' + err.message)\n      })\n  }\n\n  init(activeIndex: number = 0, isSearch?) {\n    this.isSearch = isSearch\n    const params = {\n      page: this.page,\n      pageSize: this.pageSize,\n      number: this.input || undefined,\n      phone: this.phone || undefined,\n      beginTime:\n        this.valueTime && this.valueTime.length > 0\n          ? this.valueTime[0]\n          : undefined,\n      endTime:\n        this.valueTime && this.valueTime.length > 0\n          ? this.valueTime[1]\n          : undefined,\n      status: activeIndex || undefined,\n    }\n    getOrderDetailPage({ ...params })\n      .then((res) => {\n        if (res.data.code === 1) {\n          this.tableData = res.data.data.records\n          this.orderStatus = activeIndex\n          this.counts = Number(res.data.data.total)\n          this.getOrderListBy3Status()\n          if (\n            this.dialogOrderStatus === 2 &&\n            this.orderStatus === 2 &&\n            this.isAutoNext &&\n            !this.isTableOperateBtn &&\n            res.data.data.records.length > 1\n          ) {\n            const row = res.data.data.records[0]\n            this.goDetail(row.id, row.status, row)\n          } else {\n            return null\n          }\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n      .catch((err) => {\n        this.$message.error('请求出错了：' + err.message)\n      })\n  }\n\n  getOrderType(row: any) {\n    if (row.status === 1) {\n      return '待付款'\n    } else if (row.status === 2) {\n      return '待接单'\n    } else if (row.status === 3) {\n      return '待派送'\n    } else if (row.status === 4) {\n      return '派送中'\n    } else if (row.status === 5) {\n      return '已完成'\n    } else if (row.status === 6) {\n      return '已取消'\n    } else {\n      return '退款'\n    }\n  }\n\n  // 查看详情\n  async goDetail(id: any, status: number, row?: any) {\n    // console.log(111, index, row)\n    this.diaForm = []\n    this.dialogVisible = true\n    this.dialogOrderStatus = status\n    this.orderId = id\n    const { data } = await queryOrderDetailById({ orderId: id })\n    this.diaForm = data.data\n    this.row = row || { id: this.$route.query.orderId, status: status }\n    if (this.$route.query.orderId) {\n      this.$router.push('/order')\n    }\n  }\n\n  //打开拒单弹窗\n  orderReject(row: any) {\n    this.cancelDialogVisible = true\n    this.orderId = row.id\n    this.dialogOrderStatus = row.status\n    this.cancelDialogTitle = '拒绝'\n    this.dialogVisible = false\n    this.cancelReason = ''\n  }\n\n  //接单\n  orderAccept(row: any) {\n    this.orderId = row.id\n    this.dialogOrderStatus = row.status\n    orderAccept({ id: this.orderId })\n      .then((res) => {\n        if (res.data.code === 1) {\n          this.$message.success('操作成功')\n          this.orderId = ''\n          // this.dialogOrderStatus = 0\n          this.dialogVisible = false\n          this.init(this.orderStatus)\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n      .catch((err) => {\n        this.$message.error('请求出错了：' + err.message)\n      })\n  }\n\n  //打开取消订单弹窗\n  cancelOrder(row: any) {\n    this.cancelDialogVisible = true\n    this.orderId = row.id\n    this.dialogOrderStatus = row.status\n    this.cancelDialogTitle = '取消'\n    this.dialogVisible = false\n    this.cancelReason = ''\n  }\n\n  //确认取消或拒绝订单并填写原因\n  confirmCancel(type) {\n    if (!this.cancelReason) {\n      return this.$message.error(`请选择${this.cancelDialogTitle}原因`)\n    } else if (this.cancelReason === '自定义原因' && !this.remark) {\n      return this.$message.error(`请输入${this.cancelDialogTitle}原因`)\n    }\n\n    ;(this.cancelDialogTitle === '取消' ? orderCancel : orderReject)({\n      id: this.orderId,\n      // eslint-disable-next-line standard/computed-property-even-spacing\n      [this.cancelDialogTitle === '取消' ? 'cancelReason' : 'rejectionReason']:\n        this.cancelReason === '自定义原因' ? this.remark : this.cancelReason,\n    })\n      .then((res) => {\n        if (res.data.code === 1) {\n          this.$message.success('操作成功')\n          this.cancelDialogVisible = false\n          this.orderId = ''\n          // this.dialogOrderStatus = 0\n          this.init(this.orderStatus)\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n      .catch((err) => {\n        this.$message.error('请求出错了：' + err.message)\n      })\n  }\n\n  // 派送，完成\n  cancelOrDeliveryOrComplete(status: number, id: string) {\n    const params = {\n      status,\n      id,\n    }\n    ;(status === 3 ? deliveryOrder : completeOrder)(params)\n      .then((res) => {\n        if (res.data.code === 1) {\n          this.$message.success('操作成功')\n          this.orderId = ''\n          // this.dialogOrderStatus = 0\n          this.dialogVisible = false\n          this.init(this.orderStatus)\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n      .catch((err) => {\n        this.$message.error('请求出错了：' + err.message)\n      })\n  }\n\n  handleClose() {\n    this.dialogVisible = false\n  }\n\n  private handleSizeChange(val: any) {\n    this.pageSize = val\n    this.init(this.orderStatus)\n  }\n\n  private handleCurrentChange(val: any) {\n    this.page = val\n    this.init(this.orderStatus)\n  }\n}\n"],"sourceRoot":""}]}